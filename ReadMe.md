# Лабораторная работа 6. Базы данных. Часть 2. Отношения между таблицами

## Цель
Изучить типы отношений между таблицами, реализовать связи 1–1, 1–M и M–M, выполнять запросы с различными JOIN, обеспечить ссылочную целостность и каскадные операции.

## Задание
- Расширить схему БД интернет-магазина новыми сущностями и связями (1–1, 1–M, M–M).
- Настроить внешние ключи, каскадное удаление и уникальные ограничения для связей.
- Заполнить таблицы тестовыми данными, включая атрибуты связей.
- Написать SQL-запросы: INNER/LEFT JOIN, многотабличные запросы, группировки, агрегаты.
- Реализовать Python-класс для работы со сложными связями, транзакциями и аналитикой.

## Файлы
- 02_schema_relations.sql — миграция и расширенная схема.
- 02_seed_relations.sql — тестовые данные и привязки.
- 02_queries_relations.sql — примеры JOIN и аналитики.
- advanced_app.py — транзакции, обработка ошибок, аналитические методы.

## Запуск
1. Использовать БД, созданную в Части 1.
2. Выполнить 02_schema_relations.sql.
3. Выполнить 02_seed_relations.sql.
4. Запустить advanced_app.py
5. По необходимости запускать выборочные запросы из 02_queries_relations.sql.

## Результат
- Реализована полноценная схема со связями 1–1 (product_details), 1–M (reviews), M–M (product_suppliers, product_tags).
- Написаны сложные JOIN-запросы и аналитика по категориям, маржинальности и рейтингам.
- Обеспечена ссылочная целостность и каскадные операции, показана транзакционная модель и обработка ошибок в Python.


## Ответы на контрольные вопросы
1. Типы отношений: 1–1, 1–M, M–M; M–M реализуется через промежуточную таблицу с парой FK. 
2. «Многие-ко-многим»: отдельная таблица (product_suppliers, product_tags) с составным/уникальным ключом по FK. 
3. INNER возвращает пересечения; LEFT — все из левой таблицы + совпавшие из правой; RIGHT/FULL — симметрично (в SQLite обычно эмулируется).
4. GROUP BY группирует строки для агрегатов (COUNT/AVG/SUM/MIN/MAX). Пример — статистика по категориям. 
5. Ссылочная целостность — внешние ключи, ограничения, каскады; транзакции и обработка ошибок повышают надёжность.
6. 